<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Eircode-js by daviddoran</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Eircode-js</h1>
        <p>An unofficial JavaScript library for working with Eircodes (Irish postcodes)</p>
        <p class="view"><a href="https://github.com/daviddoran/eircode-js">View the Project on GitHub <small>daviddoran/eircode-js</small></a></p>
        <ul>
          <li><a href="https://github.com/daviddoran/eircode-js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/daviddoran/eircode-js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/daviddoran/eircode-js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="eircodejs" class="anchor" href="#eircodejs"><span class="octicon octicon-link"></span></a>EircodeJS</h1>

<p>EircodeJS is a JavaScript library for parsing and validating <a href="http://eircode.ie/">Eircodes</a> (Irish postcodes).</p>

<p>EircodeJS has the following goals:</p>

<dl>
<dt>Correctness</dt>
  <dd>EircodeJS will never reject a valid Eircode and should never accept invalid Eircodes</dd>

  <dt>Usefulness</dt>
  <dd>EircodeJS will emit detailed error messages for the user and for the developer</dd>

  <dt>Performance</dt>
  <dd>EircodeJS will be fast and have no pathologically slow edge cases</dd>
</dl><h2>
<a name="methods" class="anchor" href="#methods"><span class="octicon octicon-link"></span></a>Methods</h2>

<p>Using the static <code>Eircode.parse</code> method we can parse some input:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">EircodeJS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'eircode-js'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">EircodeJS</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="s1">'A65R2GF'</span><span class="p">);</span>
</pre></div>

<p>This will return a <a href="src/parse-result.js">ParseResult</a> object.</p>

<p>With <code>ParseResult</code> you can check if the Eircode is valid and access its parts:</p>

<div class="highlight highlight-javascript"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">hasEircode</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Routing Key = '</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">routingKey</span><span class="p">());</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Unique Identifier = '</span><span class="p">,</span> <span class="nx">result</span><span class="p">.</span><span class="nx">uniqueIdentifier</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>

<p>You can get a plain object containing all the parsed properties using <code>toJSON</code>:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">());</span>
</pre></div>

<p>This will output something like:</p>

<div class="highlight highlight-javascript"><pre><span class="p">{</span>
    <span class="nx">hasEircode</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">eircode</span><span class="o">:</span> <span class="s1">'A65R2GF'</span><span class="p">,</span>
    <span class="nx">hasRoutingKey</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">routingKey</span><span class="o">:</span> <span class="s1">'A65'</span><span class="p">,</span>
    <span class="nx">hasUniqueIdentifier</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">uniqueIdentifier</span><span class="o">:</span> <span class="s1">'R2GF'</span><span class="p">,</span>
    <span class="nx">error</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">logs</span><span class="o">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>

<p>The properties on the object (and the matching methods on <code>ParseResult</code>) are:</p>

<table>
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>hasEircode</code></td>
<td>bool</td>
<td>Whether the input was a complete and valid Eircode.</td>
</tr>
<tr>
<td><code>eircode</code></td>
<td>string</td>
<td>The complete Eircode in <strong>canonical form</strong> if <code>hasEircode</code> is true. An empty string otherwise.</td>
</tr>
<tr>
<td><code>hasRoutingKey</code></td>
<td>bool</td>
<td>Whether the input had a valid Routing Key.</td>
</tr>
<tr>
<td><code>routingKey</code></td>
<td>string</td>
<td>The Routing Key in <strong>canonical form</strong> if <code>hasRoutingKey</code> is true. An empty string otherwise.</td>
</tr>
<tr>
<td><code>hasUniqueIdentifier</code></td>
<td>bool</td>
<td>Whether the input had a valid Unique Identifier. Will be true iff <code>hasEircode</code> is true.</td>
</tr>
<tr>
<td><code>uniqueIdentifier</code></td>
<td>string</td>
<td>The Unique Identifier in <strong>canonical form</strong> if <code>hasUniqueIdentifier</code> is true. An empty string otherwise.</td>
</tr>
<tr>
<td><code>error</code></td>
<td>object / null</td>
<td>If the Eircode could not be parsed then an object containing the error details. null otherwise.</td>
</tr>
</tbody>
</table><p>An example <code>error</code> object is the following:</p>

<div class="highlight highlight-javascript"><pre><span class="p">{</span>
    <span class="nx">message</span><span class="o">:</span> <span class="s2">"Unique Identifier cannot contain \"!\""</span><span class="p">,</span>
    <span class="nx">inputPos</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="nx">outputPos</span><span class="o">:</span> <span class="mi">4</span>
<span class="p">}</span>
</pre></div>

<p>In this example <code>inputPos</code> differs from <code>outputPos</code> because a whitespace character in the input was skipped over.</p>

<p>The error object contains the following properties:</p>

<table>
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>message</code></td>
<td>string</td>
<td>A human readable message describing the error.</td>
</tr>
<tr>
<td><code>inputPos</code></td>
<td>int</td>
<td>The position in the input string where the error occurred. Or -1 if there is no applicable position. <code>inputPos</code> will equal the length of the input string if more input was expected.</td>
</tr>
<tr>
<td><code>outputPos</code></td>
<td>int</td>
<td>The position in the output string (the canonical form) where the error occurred. Or -1 if there is no applicable position. Will never be greater than six.</td>
</tr>
</tbody>
</table><h2>
<a name="eircode-specification" class="anchor" href="#eircode-specification"><span class="octicon octicon-link"></span></a>Eircode Specification</h2>

<p>I have compiled the following unofficial Eircode specification based on the information that's been released to date (see <a href="#References">References</a>).</p>

<p>An example of a valid Eircode is:</p>

<ul>
<li><code>A65R2GF</code></li>
</ul><p>In this example:</p>

<ul>
<li>
<code>A65</code> is the Routing Key</li>
<li>
<code>R2GF</code> is the Unique Identifier</li>
</ul><p>The Routing Key:</p>

<ul>
<li>Begins with a letter</li>
<li>Followed by two numbers</li>
</ul><p>The only exception is 'D6W' which is a valid Routing Key.</p>

<p>The Unique Identifier:</p>

<ul>
<li>Contains four safe characters</li>
</ul><p>A safe character is either a safe letter or a safe number.</p>

<p>A safe letter is an alphabetic character, excluding:</p>

<ul>
<li>
<code>O</code> and <code>I</code>
</li>
<li>
<code>M</code> and <code>N</code>
</li>
</ul><p>A safe number is a numeric digit, excluding:</p>

<ul>
<li>
<code>0</code> and <code>1</code>
</li>
</ul><h2>
<a name="terminology" class="anchor" href="#terminology"><span class="octicon octicon-link"></span></a>Terminology</h2>

<p>A <strong>valid</strong> Eircode, Routing Key or Unique Identifier follows the patterns laid out in the specification.
Note that a valid Eircode may be unused in real life, may have been discontinued, may map to a geographic area
without any dwellings, etc. Checking if an Eircode is deliverable is different to checking if it is valid.</p>

<p>The <strong>canonical</strong> form of an Eircode has letters uppercased and spaces and non-valid characters removed.
For example, <code>A65R2GF</code> is the canonical form of both <code>a65 r2gf</code> and <code>A-65-R2GF</code>. The <code>ParseResult</code> properties <code>routingKey</code>,
<code>uniqueIdentifier</code> and <code>eircode</code> will always contain either the canonical form or an empty string (if invalid).</p>

<h2>
<a name="references" class="anchor" href="#references"><span class="octicon octicon-link"></span></a>References</h2>

<p><a href="http://www.fretwell.ie/images/Eircode.pdf">http://www.fretwell.ie/images/Eircode.pdf</a></p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/daviddoran">daviddoran</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>